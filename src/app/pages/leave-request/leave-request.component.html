<div class="container ps-5 pe-5">
  <div class="row">
    <div class="col-12 d-flex justify-content-between align-items-center py-5">
      <h4>LEAVE REQUESTS</h4>
     </div>
  </div>
  <div class="assignments d-flex flex-column gap-2">
    <div class="pending-leave-requests">
      <h5 class="mb-5">Pending Leave Requests</h5>
      <div class="card-container d-flex flex-column gap-4">
        @for (item of pendingLeaveRequests; track $index) {
          <!-- @if (item.is_pending) { -->
        <app-leave-request-card [leave]="item" (click)="openModal(item)" data-bs-toggle="modal"
        data-bs-target="#leaveviewModal"></app-leave-request-card>
          <!-- } -->
        }
       <div class="completed-assignments d-flex flex-column align-items-end">
          <p>view all <i class="bi bi-arrow-right"></i></p>
        </div>
      </div>
    </div>
    <div class="leave-request-history mt-5">
      <div class="col-12 d-flex justify-content-between align-items-center py-5">
        <h5>Leave Request History</h5>
      </div>
      <div class="w-100">
        <!-- Leave Request History Table -->
        <p-table [value]="filteredLeaveRequests" [paginator]="true" [rows]="10" [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 5%">SL No.</th>
              <th style="width: 20%">Name of trainee</th>
              <th style="width: 15%">Reason For Leave</th>
              <th style="width: 5%">No. of days Requested</th>
              <th style="width: 25%">Dates</th>
              <th style="width: 5%">Approval Status</th>


            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
            <tr>
              <td>{{ rowIndex + 1 }}</td>
              <td>{{ item.name }}</td>
              <td>{{item.reason}}</td>
              <td>{{item.no_of_days}}</td>
              <td>
                <ng-container *ngIf="item.no_of_days === 1; else multipleDays">{{ item.leave_date }}</ng-container>
                <ng-template #multipleDays>{{ item.leave_date_from }} to {{ item.leave_date_to }}</ng-template>
              </td>
              <td> <ng-container *ngIf="item.is_approved_trainer&&item.is_approved_l_and_d else notApproved">
                <span style="color: green;">Approved</span>
              </ng-container>
              <ng-template #notApproved>
                <span style="color: red;">Rejected</span>
              </ng-template></td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>
 </div>

 <!-- <app-leaveviewmodal [leave]="selectedLeave"></app-leaveviewmodal> -->

 <app-leaveviewmodal [leaves]="selectedLeave" (refreshRequests)="refreshLeaveRequests()"></app-leaveviewmodal>
